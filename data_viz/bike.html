<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>bike</title>
<style>
.calcul {
  display: flex;
  flex-direction: row;
}
</style>
    </head>
    <body>
<section class="calcul" id="dentsBraquet">
  <div class="block">
    <h2>dents plateau</h2>
    <form>
    <input type="number" id="plateau" min="4" max="64" value="42"/>
    <div>
    <input type="checkbox" id="plateau-cont"><label for="plateau-cont">calculé</label>
    </div>
    </form>
  </div>

  <div class="block">
    <h2>÷</h2>
  </div>

  <div class="block">
    <h2>dents pignon</h2>
    <input type="number" id="pignon" min="4" max="64" value="34"/>
  </div>

  <div class="block">
    <h2>=</h2>
  </div>

  <div class="block">
    <h2>braquet</h2>
    <input type="number" id="braquet"/>
   </div>
</section>

<section class="calcul" id="braquetDev">
  <div class="block">
    <h2>braquet</h2>
    <input type="number" id="bd_braquet" value="1.235"/>
  </div>

  <div class="block">
    <h2>× π × </h2>
  </div>

  <div class="block">
    <h2>⌀ roue (mm)</h2>
    <input type="number" id="bd_diam" value="700"/>
  </div>

  <div class="block">
    <h2>=</h2>
  </div>

  <div class="block">
    <h2>développement (m/tour)</h2>
    <input type="number" id="bd_dev"/>
   </div>
</section>
<!--
braquet
taille de la roue
développement

développement
cadence
vitesse
-->

<p>
<em>En apprendre plus sur les braquets, le développement ou la cadence sur le site <a href="http://www.lesvelosdepatrick.com/transmission-velo-braquets.htm">les vélos de Patrick</a></em>.
</p>

<script>
    const dbbraq = el => evt => {
        if (evt.target.id == 'braquet' ) {
            el['pignon'].value = el['plateau'].value / el['braquet'].value
        } else {
            el['braquet'].value = el['plateau'].value / el['pignon'].value
        }
    }

    const braqdev = el => evt => {
        if (evt.target.id == 'bd_dev') {
        } else {
            console.log('hello')
            el['bd_dev'].value = el['bd_braquet'].value * 3.14159 * el['bd_diam'].value / 1000
        }
    }

    const dbelems = ['braquet', 'pignon', 'plateau'].reduce((acc, v) => ({ ...acc, [v]: document.querySelector(`#${v}`) }), {})
    Object.entries(dbelems).forEach(([k, v]) => v.addEventListener('change', dbbraq(dbelems)))
    dbbraq(dbelems)({target: { id: 'plateau' }})

    const bd_elems = ['bd_braquet', 'bd_diam', 'bd_dev'].reduce((acc, v) => ({ ...acc, [v]: document.querySelector(`#${v}`) }), {})
    Object.entries(bd_elems).forEach(([k, v]) => v.addEventListener('change', braqdev(bd_elems)))
    console.log(bd_elems)
    braqdev(bd_elems)({target: {id: 'bd_braquet' }})
</script>
    </body>
</html>
